{
    "$id": "https://raw.githubusercontent.com/SPINEProject/SPINE-json-schema/master/schemas/spm.schema.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Definitions SPM",
    "definitions": {
        "name": {
            "type": "string",
            "title": "Experiment name"
        },
        "type": {
            "title": "SPM Experiment Type",
            "type": "string",
            "enum": [
                "SPM_MULTIPLE_REGRESSION"
            ]
        },
        "images": {
            "title": "List of images to use in the experiment",
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "covariate": {
            "title": "A covariate",
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "name": {
                    "type": "string",
                    "title": "Covariate name"
                },
                "value": {
                    "type": "array",
                    "title": "covariate values",
                    "items": {
                        "type": "object",
                        "properties": {
                            "value": {
                                "oneOf": [
                                    {
                                        "type": "string"
                                    },
                                    {
                                        "type": "number"
                                    }
                                ]
                            }
                        },
                        "additionalProperties": false,
                        "required": "value"
                    }
                },
                "interactions": {
                    "type": "string",
                    "title": "Covariate interaction",
                    "description": "For each covariate you have defined, there is an opportunity to create an additional regressor that is the interaction between the covariate and a chosen experimental factor.",
                    "enum": [
                        "NONE",
                        "WITH_FACTOR_2",
                        "WITH_FACTOR_1",
                        "WITH_FACTOR_3"
                    ]
                },
                "centering": {
                    "type": "string",
                    "title": "Covariate centering",
                    "description": "Centering, in the simplest case, refers to subtracting the mean (central) value from the covariate values, which is equivalent to orthogonalising the covariate with respect to the constant column.",
                    "enum": [
                        "OVERALL_MEAN",
                        "FACTOR_1_MEAN",
                        "FACTOR_2_MEAN",
                        "FACTOR_3_MEAN",
                        "NO_CENTERING",
                        "USER_SPECIFIED_VALUE",
                        "AS_IMPLIED_BY_ANCOVA",
                        "GM"
                    ]
                }
            }
        },
        "covariates": {
            "title": "List of covariates and their value",
            "description": "The order of the covariates values must follow the order of the images",
            "type": "array",
            "items": {
                "$ref": "#/definitions/covariate"
            }
        },
        "design": {
            "type": "object",
            "additionalProperties": false,
            "required": [
                "type",
                "images",
                "covariates"
            ],
            "properties": {
                "type": {
                    "$ref": "#/definitions/type"
                },
                "images": {
                    "$ref": "#/definitions/images"
                },
                "covariates": {
                    "$ref": "#/definitions/covariates"
                }
            }
        },
        "postSPMExperimentBody": {
            "type": "object",
            "additionalProperties": false,
            "required": [
                "name",
                "design"
            ],
            "properties": {
                "name": {
                    "$ref": "#/definitions/name"
                },
                "design": {
                    "$ref": "#/definitions/design"
                }
            }
        }
    }
}