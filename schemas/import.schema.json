{
    "$id": "https://raw.githubusercontent.com/SPINEProject/SPINE-json-schema/master/schemas/import.schema.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Import",
    "definitions": {
        "_id": {
            "type": "string"
        },
        "_rev": {
            "type": "string"
        },
        "pathToFolder": {
            "type": "string"
        },
        "endUploadDate": {
            "type": "string"
        },
        "uploadDate": {
            "type": "string"
        },
        "dicomFileCount": {
            "minimum": 0,
            "type": "integer"
        },
        "nonDicomFileCount": {
            "minimum": 0,
            "type": "integer"
        },
        "subjectCount": {
            "minimum": 0,
            "type": "integer"
        },
        "visitCount": {
            "minimum": 0,
            "type": "integer"
        },
        "acquisitionCount": {
            "minimum": 0,
            "type": "integer"
        },
        "docType": {
            "type": "string",
            "enum": [
                "import"
            ]
        },
        "status": {
            "type": "string",
            "enum": [
                "FAILED",
                "DONE",
                "RUNNING"
            ]
        },
        "step": {
            "type": "string",
            "enum": [
                "LISTING",
                "LISTING_DONE",
                "PROCESSING_SERIES",
                "PROCESSING_SERIES_DONE",
                "REPLICATING"
            ]
        },
        "reference": {
            "type": "object",
            "properties": {
                "cohortId": {
                    "type": "string"
                }
            },
            "required": [
                "cohortId"
            ]
        },
        "anonymize": {
            "type": "boolean"
        },
        "importListing": {
            "type": "object",
            "properties": {
                "status": {
                    "enum": [
                        "LISTING"
                    ]
                },
                "step": {
                    "enum": [
                        "RUNNING"
                    ]
                }
            }
        },
        "importReplicating": {
            "type": "object",
            "properties": {
                "status": {
                    "enum": [
                        "REPLICATING"
                    ]
                }
            },
            "required": [
                "dicomFileCount",
                "nonDicomFileCount",
                "subjectCount",
                "visitCount",
                "acquisitionCount"
            ]
        },
        "importListingDone": {
            "type": "object",
            "properties": {
                "status": {
                    "enum": [
                        "LISTING_DONE"
                    ]
                }
            },
            "required": [
                "dicomFileCount",
                "nonDicomFileCount"
            ]
        },
        "importProcessingSeries": {
            "type": "object",
            "properties": {
                "status": {
                    "enum": [
                        "PROCESSING_SERIES"
                    ]
                }
            },
            "required": [
                "dicomFileCount",
                "nonDicomFileCount"
            ]
        },
        "importProcessingSeriesDone": {
            "type": "object",
            "properties": {
                "status": {
                    "enum": [
                        "PROCESSING_SERIES_DONE"
                    ]
                }
            },
            "required": [
                "dicomFileCount",
                "nonDicomFileCount",
                "subjectCount",
                "visitCount",
                "acquisitionCount"
            ]
        },
        "importDone": {
            "type": "object",
            "properties": {
                "status": {
                    "enum": [
                        "DONE"
                    ]
                }
            },
            "required": [
                "dicomFileCount",
                "nonDicomFileCount",
                "subjectCount",
                "visitCount",
                "acquisitionCount",
                "endUploadDate"
            ]
        },
        "importFailed": {
            "type": "object",
            "properties": {
                "status": {
                    "enum": [
                        "FAILED"
                    ]
                }
            },
            "required": [
                "failMessage"
            ]
        },
        "failMessage": {
            "type": "string"
        },
        "importDoc": {
            "type": "object",
            "properties": {
                "anonymize": {
                    "$ref": "#/definitions/anonymize"
                },
                "_id": {
                    "$ref": "#/definitions/_id"
                },
                "failMessage": {
                    "$ref": "#/definitions/failMessage"
                },
                "_rev": {
                    "$ref": "#/definitions/_rev"
                },
                "pathToFolder": {
                    "$ref": "#/definitions/pathToFolder"
                },
                "endUploadDate": {
                    "$ref": "#/definitions/endUploadDate"
                },
                "uploadDate": {
                    "$ref": "#/definitions/uploadDate"
                },
                "dicomFileCount": {
                    "$ref": "#/definitions/dicomFileCount"
                },
                "nonDicomFileCount": {
                    "$ref": "#/definitions/nonDicomFileCount"
                },
                "subjectCount": {
                    "$ref": "#/definitions/subjectCount"
                },
                "visitCount": {
                    "$ref": "#/definitions/visitCount"
                },
                "acquisitionCount": {
                    "$ref": "#/definitions/acquisitionCount"
                },
                "docType": {
                    "$ref": "#/definitions/docType"
                },
                "status": {
                    "$ref": "#/definitions/status"
                },
                "step": {
                    "$ref": "#/definitions/step"
                },
                "reference": {
                    "$ref": "#/definitions/reference"
                }
            },
            "oneOf": [
                {
                    "#ref": "#/definitions/importListing"
                }
            ],
            "additionalProperties": false,
            "required": [
                "reference",
                "status",
                "docType",
                "uploadDate",
                "pathToFolder",
                "step",
                "_id",
                "_rev",
                "anonymize"
            ]
        }
    }
}